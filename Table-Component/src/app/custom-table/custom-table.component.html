<div class="container-fluid">
    <h2 class="text-center card p-2 mt-2 text-dark">Table Component</h2>
    <div>
        <button class="btn btn-primary mt-2" (click)="showHideInfo = !showHideInfo">
            <i class="fa fa-cog"></i>
            <ng-container *ngIf='showHideInfo ; else hide'>
                Show
            </ng-container>
            <ng-template #hide>
                Hide
            </ng-template>
            column preferences
        </button>
        <div class="d-flex m-4" *ngIf='!showHideInfo'>
            <form [formGroup]="form">
                <span formArrayName="tableInfo" class="custom-checkbox m-4" *ngFor="let item of form.controls.tableInfo.controls; let i = index">
                    <input type="checkbox" class="custom-control-input" [id]="i" [formControlName]="i" />
                    <label class="custom-control-label" [for]="i">
                        {{ TableHeadersInfo[i].heading }}
                    </label>
                </span>
                <button class="btn btn-success btn-sm" type="button" (click)="submit()">
                    Submit
                </button>
            </form>
        </div>
    </div>
    <div class="form-group">
        <label for="search" class="font-weight-bold">Table level search:</label>
        <input type="text" class="form-control col-6" id="search" #search (keyup)="filterTableInfo()" />
    </div>

    <table class="table table-bordered">
        <thead class="thead-light">
            <tr style="white-space: nowrap;">
                <th *ngFor='let item of selectedHeaders' (click)="sorting(item.heading)">
                    {{ item.heading }}
                    <i class="fa fa-sort" style="color:#b2b2b2" *ngIf="item.heading !== selectedKey"></i>
                    <i class="fa fa-sort-up" *ngIf="order == -1 && item.heading == selectedKey"></i>
                    <i class="fa fa-sort-down" *ngIf="order == 1 && item.heading == selectedKey"></i>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngIf='TableData?.length > 1'>
                <td *ngFor='let row of selectedHeaders'>
                    <input type="text" class="form-control" (keyup)="filterByColumn(row.key, $event)">
                </td>
            </tr>
            <tr *ngFor='let row of TableData | filterColumn: filterArray'>
                <td *ngFor='let item of selectedHeaders'> {{row[item.key]}} </td>
            </tr>
        </tbody>
    </table>
</div>